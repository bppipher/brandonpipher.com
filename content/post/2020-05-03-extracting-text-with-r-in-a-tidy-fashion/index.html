---
title: Extracting text with R in a Tidy fashion
author: Brandon P. Pipher
date: '2020-05-03'
slug: []
categories:
  - Data Wrangling
tags:
  - R
  - Tidyverse
  - pdftools
subtitle: 'Gathering data to compare PhD programs in Statistics'
summary:  'Gathering data to compare PhD programs in Statistics'
authors: []
lastmod: '2020-05-03T16:39:16-04:00'
featured: no
image:
  caption: 'Entacmaea quadricolor'
  focal_point: ''
  preview_only: no
projects: []
---



<p>When it comes to looking at PhD programs it can be difficult to find reliable resources that allow you to compare and constrast programs en masse. For something that seems so important of a decision it seems strange the expectation is to hunt one-by-one through university websites to try and find program data, and even stranger that most programs do not publicly divulge all sorts of information on admissions and graduation.</p>
<p>There were a few resources I wanted to try and pool together to get a better idea on programs, and thus began this minor project.</p>
<p>By the end of this the goal is to have two dataframes, one for Statistics PhD programs and another for Biostatistics PhD programs, and try to scrape program size, USNews ranking, and presence of a consulting center.</p>
<pre class="r"><code>library(pdftools)
library(tidyverse)
library(magrittr)
# OR load all of Tidyverse at once:
# tidyverse_packages() %&gt;% lapply(library, character.only = TRUE)</code></pre>
<p>To start off lets pull some information from the <a href="https://www.amstat.org/asa/education/Statistics-and-Biostatistics-Degree-Data.aspx">ASA Statistics and Biostatistics Degree Data</a>, specifically the list of universities granting PhD’s in Statistics and Biostatistics and how many PhD’s were granted between 2003 and 2018.</p>
<pre class="r"><code># URL locations
stat.phdnums.loc &lt;-
  &quot;https://ww2.amstat.org/misc/StatsPhD2003-MostRecent.pdf&quot;

biostat.phdnums.loc &lt;-
  &quot;https://ww2.amstat.org/misc/BiostatsPhD2003-MostRecent.pdf&quot;

# Reading in PDF&#39;s
stat.phdnums &lt;-
  pdf_text(stat.phdnums.loc) %&gt;%
  read_lines()

biostat.phdnums &lt;-
  pdf_text(biostat.phdnums.loc) %&gt;%
  read_lines()</code></pre>
<p>Here we can see the raw format the data is in.</p>
<pre class="r"><code>stat.phdnums</code></pre>
<pre><code>##  [1] &quot;      All data from National Center for Education Statistics and retrieved by Steve Pierson (pierson@amstat.org). The data here includes biostatistics degrees as&quot;
##  [2] &quot;                     categorized by the CIP Code 27.05. For more information on degrees included, see http://community.amstat.org/blogs/steve-&quot;                   
##  [3] &quot;                                                       pierson/2014/07/28/categorization-of-statistics-degrees.&quot;                                                  
##  [4] &quot;                    Statistics PhD&#39;s               2003 2004 2005 2006 2007 2008 2009 2010 2011 2012 2013 2014 2015 2016 2017 2018 2003-2018&quot;                     
##  [5] &quot; 1 North Carolina State University at Raleigh         15       9    12    13     22    15    32    19   14    20    12     17    19    20     19     25     283&quot;  
##  [6] &quot; 2 Iowa State University                                9      8     5    11     14     4    11    13   14      9   15     28    14      9    18     27     209&quot;  
##  [7] &quot; 3 University of Wisconsin-Madison                      5      6    14     9     20    13    15    12   13      9   13     10    13    24     15     17     208&quot;  
##  [8] &quot; 4 Stanford University*                               10      12    14     6      9    10     5     9   13      7   13     10     4      9    23       6    160&quot;  
##  [9] &quot; 5 Texas A &amp; M University-College Station               6     12    18    10      7     4     5    11   16    18    10      7    15      4     8       8    159&quot;  
## [10] &quot; 6 Pennsylvania State University                        6      9     8     1      8     9    10    10   14      9   12      9    17    14      6       9    151&quot;  
## [11] &quot; 7 Ohio State University-Main Campus                    3      5     3    12     12     7    11    11    6    11      8    13    14    12      6     12     146&quot;  
## [12] &quot; 8 Purdue University-Main Campus                        6      5    12     8      8     7    10    12    9      9     5    10    14      8     9     13     145&quot;  
## [13] &quot; 9 University of Michigan-Ann Arbor                     8      5     3     3      8     9    12    11    7    11    13      9     8    11     13       9    140&quot;  
## [14] &quot;10 University of California-Los Angeles                 2      2     2     6      9     7     9     8    7    11    11      8     6    12     13     10     123&quot;  
## [15] &quot;11 University of North Carolina at Chapel Hill          5      5     3     6      1    12     4     5    8    14      9     8    10    14     11       8    123&quot;  
## [16] &quot;12 Duke University                                      7      1     3     7      5     7     9     5    8      4     9    12     9      8    12     14     120&quot;  
## [17] &quot;13 University of California-Berkeley                    5      5     8     7      7     5    11     6   10      4   13      7     6      5     7       7    113&quot;  
## [18] &quot;14 Carnegie Mellon University                           6      8     3    12      6     1     5     6    8    10      7    10    12      8     2       9    113&quot;  
## [19] &quot;15 Florida State University                             3      4     3     3      6     7     5     5   13      7     3     8     7      9     9     18     110&quot;  
## [20] &quot;16 University of Minnesota-Twin Cities                  7      3     7     8      8     9     8     2    8      5     9    10     9      5     8       3    109&quot;  
## [21] &quot;17 Virginia Polytechnic Institute                       5      2     7     8      7     5     5     5    7      5     7     6    13    10      7       6    105&quot;  
## [22] &quot;18 University of Florida                                1      4     5     9      7    11     4     5    3    11      7     6     5      7    10       8    103&quot;  
## [23] &quot;19 Rice University                                      3      3     5    11      4     7     7    11    2      6     4     6     3      8     7       7     94&quot;  
## [24] &quot;20 Columbia University B55                              3      4     6     9      3     3     4     5    9      2     9     8     5      6     7     11      94&quot;  
## [25] &quot;21 Harvard University                                   4      5     3     4      2     2     8     4    6      7     8     7     9      8     6     11      94&quot;  
## [26] &quot;22 University of Chicago                                2      7     4     6      4     5     9     4    4      7   10      2     8      7     5     10      94&quot;  
## [27] &quot;23 University of California-Davis                       4      3    10     4      8     4     8     3    3      6     5     5     8      3     8     11      93&quot;  
## [28] &quot;24 University of Georgia                                0      4     6     6      2     4    10     6    3      0     8     9    12      9     7       7     93&quot;  
## [29] &quot;25 University of Connecticut                            2      3     5     2      8     5     3     5    5      5   10      9     3      7     7     10      89&quot;  
## [30] &quot;26 University of Pennsylvania                           3      5     4     3      4     3     6     9    3      8     5    10     5      6    10       3     87&quot;  
## [31] &quot;27 University of Missouri-Columbia                      2      4     5     5      6     3     6     8    3      2   12      8     7      6     4       6     87&quot;  
## [32] &quot;28 University of Washington                             4      3     1     4      5     5     9     7    7      5     5     6     6      6     8       5     86&quot;  
## [33] &quot;29 Rutgers University-New Brunswick                     2      3     6     3      4     5     6     7    4      3     7     7     6      5     4       8     80&quot;  
## [34] &quot;30 University of California-Riverside                   1      1     5     2      6     5     7     0   10    12      7     3     3      5     3       9     79&quot;  
## [35] &quot;&quot;                                                                                                                                                                 
## [36] &quot;31 Baylor University                          3 5 1 3 6 2 7 5 7 2  6 5 4  5  7  7 75&quot;                                                                             
## [37] &quot;32 Southern Methodist University              2 6 7 1 4 3 5 3 3 3  6 6 6  5  8  3 71&quot;                                                                             
## [38] &quot;33 Michigan State University                  6 1 3 6 5 1 2 3 6 7  2 4 3  8  6  8 71&quot;                                                                             
## [39] &quot;34 University of Illinois at Urbana-Champaign 2 1 3 5 6 1 2 3 8 5  2 6 5  2  7 12 70&quot;                                                                             
## [40] &quot;35 University of South Carolina-Columbia      2 3 3 2 4 7 5 3 1 5  7 4 4  5  8  5 68&quot;                                                                             
## [41] &quot;36 University of California-Santa Barbara     4 2 2 6 3 4 5 2 5 2  6 2 7  7  2  9 68&quot;                                                                             
## [42] &quot;37 University of Kentucky                     0 5 6 4 4 5 2 5 2 3  1 3 4  6 10  6 66&quot;                                                                             
## [43] &quot;38 University of Maryland-College Park        0 0 5 3 1 7 4 4 6 4 10 2 8  2  3  5 64&quot;                                                                             
## [44] &quot;39 Cornell University                         3 5 4 2 6 0 3 3 4 4  7 3 6  5  6  2 63&quot;                                                                             
## [45] &quot;40 Colorado State University-Fort Collins     4 4 2 3 4 4 7 4 1 2  4 5 2 11  3  2 62&quot;                                                                             
## [46] &quot;41 University of Maryland-Baltimore County    3 0 5 6 2 2 2 2 4 1  6 5 5  7  4  5 59&quot;                                                                             
## [47] &quot;42 University of Pittsburgh                   2 4 5 2 4 3 5 2 7 5  3 2 4  5  2  4 59&quot;                                                                             
## [48] &quot;43 Temple University                          0 0 0 0 0 8 3 2 7 5  5 2 5 11  3  7 58&quot;                                                                             
## [49] &quot;44 Western Michigan University                6 5 1 2 1 2 6 3 3 3  2 2 2  6  4  6 54&quot;                                                                             
## [50] &quot;45 George Washington University               2 2 1 3 0 4 1 3 1 7  0 6 0  5  8  9 52&quot;                                                                             
## [51] &quot;46 Kansas State University                    2 5 2 4 1 3 2 5 2 5  3 4 5  1  0  7 51&quot;                                                                             
## [52] &quot;47 University of Rochester                    4 0 0 2 2 2 3 3 3 4  1 5 4  4  4  4 45&quot;                                                                             
## [53] &quot;48 University of Iowa                         4 2 1 0 7 5 3 4 1 6  2 1 3  1  4  1 45&quot;                                                                             
## [54] &quot;49 The University of Texas at Dallas          0 2 0 3 4 1 0 3 4 2  4 1 4  5  6  3 42&quot;                                                                             
## [55] &quot;50 University of Nebraska-Lincoln             0 0 1 2 0 3 1 6 3 1  3 5 3  5  5  4 42&quot;                                                                             
## [56] &quot;51 Yale University                            4 5 1 1 2 1 4 1 3 3  3 2 4  2  1  4 41&quot;                                                                             
## [57] &quot;52 Bowling Green State University             0 0 0 0 0 1 5 2 2 2  4 7 3  4  4  3 37&quot;                                                                             
## [58] &quot;53 Northwestern University                    1 0 1 1 3 2 0 2 3 1  4 6 4  3  3  3 37&quot;                                                                             
## [59] &quot;54 Oregon State University                    0 0 2 3 2 2 3 1 1 3  2 1 3  2  2  9 36&quot;                                                                             
## [60] &quot;55 University of New Mexico                   4 2 3 1 3 0 5 3 2 1  1 2 3  2  3  0 35&quot;                                                                             
## [61] &quot;56 University of Virginia-Main Campus         1 3 3 0 0 0 2 4 1 2  3 3 2  4  2  3 33&quot;                                                                             
## [62] &quot;57 The University of Alabama                  0 0 4 4 1 2 4 1 3 2  4 1 0  2  1  3 32&quot;                                                                             
## [63] &quot;58 George Mason University                    0 0 0 0 0 0 1 2 1 3  2 5 4  4  1  3 26&quot;                                                                             
## [64] &quot;59 North Dakota State University              1 2 1 0 0 1 2 2 2 1  0 3 3  3  1  3 25&quot;                                                                             
## [65] &quot;60 Case Western Reserve University            2 3 3 2 1 3 2 2 5 1  1 0 0  0  0  0 25&quot;                                                                             
## [66] &quot;61 Arizona State University-Tempe             0 0 0 0 0 0 0 6 2 2  2 3 1  1  1  6 24&quot;                                                                             
## [67] &quot;62 University of California-Irvine            0 0 0 0 0 0 0 0 1 1  0 6 7  1  4  3 23&quot;                                                                             
## [68] &quot;63 Oklahoma State University                  0 0 1 0 2 1 2 1 0 2  2 7 1  0  3  1 23&quot;                                                                             
## [69] &quot;64 SUNY at Albany                             0 1 2 0 0 1 2 2 0 0  1 3 3  0  3  2 20&quot;                                                                             
## [70] &quot;&quot;                                                                                                                                                                 
## [71] &quot;65 The University of Texas at San Antonio          0   0   0   0   0   0   0   1   0   5   2   3   0   0   6   2  19&quot;                                             
## [72] &quot;66 University of Wyoming                           0   0   2   0   0   0   1   2   2   1   2   2   1   0   1   5  19&quot;                                             
## [73] &quot;67 University of Arizona                           0   0   0   1   0   0   0   0   0   0   0   1   2   1   4   4  13&quot;                                             
## [74] &quot;68 American University                             3   0   3   1   2   1   0   0   1   2   0   0   0   0   0   0  13&quot;                                             
## [75] &quot;69 University of Cincinnati-Main Campus            0   0   0   0   0   0   0   0   0   0   0   0   1   2   0   4   7&quot;                                             
## [76] &quot;70 Montana State University                        3   0   1   0   0   1   0   0   0   0   0   0   0   0   0   0   5&quot;                                             
## [77] &quot;71 West Virginia University                        0   0   0   0   0   0   0   0   0   0   0   0   0   0   3   1   4&quot;                                             
## [78] &quot;72 The University of Texas at Austin               0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   3   4&quot;                                             
## [79] &quot;73 University of New Hampshire                     0   0   0   0   0   0   0   0   0   0   0   1   0   0   2   0   3&quot;                                             
## [80] &quot;74 Boston University                               0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   1   2&quot;                                             
## [81] &quot;75 Central Michigan University                     0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   1&quot;                                             
## [82] &quot;76 Indiana University-Bloomington                  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   1&quot;                                             
## [83] &quot;77 Washington University in St Louis               0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   1&quot;                                             
## [84] &quot;78 University at Buffalo                           0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1&quot;                                             
## [85] &quot;                                          Total 207 219 269 271 300 276 355 324 344 345 379 397 396 402 419 482  5385&quot;                                            
## [86] &quot;   *Self-report 2015 number&quot;</code></pre>
<p>Lets drop the last two lines indicating a footnote and the totals along with the first three rows.</p>
<pre class="r"><code>stat.phdnums &lt;- stat.phdnums %&gt;% head(-2) %&gt;% tail(-3)
biostat.phdnums &lt;- biostat.phdnums %&gt;% head(-2) %&gt;% tail(-3)</code></pre>
<p>And then lets drop the empty character entries that indicate a newpage.</p>
<pre class="r"><code>stat.phdnums &lt;- stat.phdnums %&gt;%
  lapply(function(ele)
    if (ele == &quot;&quot;)
      NULL
    else
      ele) %&gt;%
  compact()

biostat.phdnums &lt;- biostat.phdnums %&gt;%
  lapply(function(ele)
    if (ele == &quot;&quot;)
      NULL
    else
      ele) %&gt;%
  compact()</code></pre>
<p>From here we’re good to start utilizing <code>stringr</code> to tidy things up.</p>
<pre class="r"><code>stat.phd &lt;-
  stat.phdnums[-1] %&gt;%
  str_squish() %&gt;%
  str_remove(&quot;^\\s*\\d*\\s*&quot;) %&gt;%
  str_split(&quot;\\s+(?=\\d)&quot;) %&gt;%
  unlist() %&gt;%
  matrix(ncol = 18, byrow = TRUE) %&gt;%
  set_colnames(value =
                 stat.phdnums[1] %&gt;%
                 str_squish() %&gt;%
                 str_split(&quot;\\s+(?=\\d)&quot;) %&gt;%
                 unlist) %&gt;%
  as_tibble() %&gt;%
  type_convert()</code></pre>
<p>A short explanation of each step is provided below. The site <a href="https://regex101.com/">Regex101</a> is helpful with writing regex.</p>
<pre class="r"><code>biostat.phd &lt;-
  # Ignores column names
  biostat.phdnums[-1] %&gt;%
  # Removing excess whitepace
  str_squish() %&gt;%
  # Removes index
  str_remove(&quot;^\\s*\\d*\\s*&quot;) %&gt;%
  # Split on all whitespace occurring before digits
  str_split(&quot;\\s+(?=\\d)&quot;) %&gt;%
  # Turn list into a matrix
  unlist() %&gt;%
  matrix(ncol = 18, byrow = TRUE) %&gt;%
  # Handling variables names
  set_colnames(value =
                 biostat.phdnums[1] %&gt;%
                 str_squish() %&gt;%
                 str_split(&quot;\\s+(?=\\d)&quot;) %&gt;%
                 unlist) %&gt;%
  as_tibble() %&gt;%
  # Transformating variables into  numeric
  type_convert()</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   `Biotatistics PhD&#39;s` = col_character(),
##   `2003` = col_double(),
##   `2004` = col_double(),
##   `2005` = col_double(),
##   `2006` = col_double(),
##   `2007` = col_double(),
##   `2008` = col_double(),
##   `2009` = col_double(),
##   `2010` = col_double(),
##   `2011` = col_double(),
##   `2012` = col_double(),
##   `2013` = col_double(),
##   `2014` = col_double(),
##   `2015` = col_double(),
##   `2016` = col_double(),
##   `2017` = col_double(),
##   `2018` = col_double(),
##   `2003-2018` = col_double()
## )</code></pre>
<p>Let’s take a look at how this looks completed:</p>
<pre class="r"><code>stat.phd %&gt;% (function(x)rbind(head(x),tail(x)))</code></pre>
<pre><code>## # A tibble: 12 x 18
##    `Statistics PhD&#39;s`                         `2003` `2004` `2005` `2006` `2007` `2008` `2009` `2010` `2011` `2012` `2013` `2014` `2015` `2016` `2017` `2018` `2003-2018`
##    &lt;chr&gt;                                       &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;
##  1 North Carolina State University at Raleigh     15      9     12     13     22     15     32     19     14     20     12     17     19     20     19     25         283
##  2 Iowa State University                           9      8      5     11     14      4     11     13     14      9     15     28     14      9     18     27         209
##  3 University of Wisconsin-Madison                 5      6     14      9     20     13     15     12     13      9     13     10     13     24     15     17         208
##  4 Stanford University*                           10     12     14      6      9     10      5      9     13      7     13     10      4      9     23      6         160
##  5 Texas A &amp; M University-College Station          6     12     18     10      7      4      5     11     16     18     10      7     15      4      8      8         159
##  6 Pennsylvania State University                   6      9      8      1      8      9     10     10     14      9     12      9     17     14      6      9         151
##  7 University of New Hampshire                     0      0      0      0      0      0      0      0      0      0      0      1      0      0      2      0           3
##  8 Boston University                               0      0      0      0      0      0      0      0      0      0      0      0      0      0      1      1           2
##  9 Central Michigan University                     0      0      0      0      0      0      0      0      0      0      0      0      0      0      0      1           1
## 10 Indiana University-Bloomington                  0      0      0      0      0      0      0      0      0      0      0      0      0      0      0      1           1
## 11 Washington University in St Louis               0      0      0      0      0      0      0      0      0      0      0      0      0      0      0      1           1
## 12 University at Buffalo                           0      1      0      0      0      0      0      0      0      0      0      0      0      0      0      0           1</code></pre>
<pre class="r"><code>biostat.phd %&gt;% (function(x)rbind(head(x),tail(x)))</code></pre>
<pre><code>## # A tibble: 12 x 18
##    `Biotatistics PhD&#39;s`                        `2003` `2004` `2005` `2006` `2007` `2008` `2009` `2010` `2011` `2012` `2013` `2014` `2015` `2016` `2017` `2018` `2003-2018`
##    &lt;chr&gt;                                        &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;
##  1 University of North Carolina at Chapel Hill      9      9     11      8      5     11      9     13     12     16      9     22     24     16     14     17         205
##  2 Harvard University                               1      9     17     14     13     12      9      6      9     17     10     13     12      9     14     16         181
##  3 University of Michigan-Ann Arbor                 8     12      6      7      8     10      6      9     10     15     15     12     11     11     13     15         168
##  4 University of Pittsburgh-Pittsburgh Campus       5      8      4      4      9      5     12     10     15      9     12     14     18      5     10      8         148
##  5 University of Washington-Seattle Campus          6      9      7      6      8     11      8      8      5      7     12      9     12     11     14      5         138
##  6 University of Texas Health Science Center        0      1      9      0      5      5      6      5      7      9     13      7     19     15     13     19         133
##  7 University of Miami                              0      0      0      0      0      0      0      0      0      0      0      0      0      0      1      3           4
##  8 University of Arizona                            0      0      0      0      0      0      0      0      0      0      0      0      0      1      0      2           3
##  9 University of Massachusetts-Amherst              0      0      0      0      0      0      0      0      0      0      0      0      1      0      1      0           2
## 10 University of Georgia                            0      0      0      0      0      0      0      0      0      0      0      0      0      0      0      2           2
## 11 Southern Methodist University                    0      0      0      0      0      0      0      0      0      0      0      0      0      0      0      1           1
## 12 University of Hawaii at Manoa                    0      0      1      0      0      0      0      0      0      0      0      0      0      0      0      0           1</code></pre>
<p>Now, regarding USNews Statistics PhD Rankings…</p>
<div id="usnews-rankings" class="section level1">
<h1>USNews Rankings</h1>
<p>There were Python scripts available to manage this, but that felt just like cheating. I tried a few tools like <a href="https://cran.r-project.org/web/packages/rvest/vignettes/selectorgadget.html">SelectorGadget</a> to simplify scraping the relevant portions of the CSS but USNews’ format was more unwieldly than it seemed capable of handling. There was also <a href="https://github.com/tidyverse/rvest/issues/17">this</a> interesting, but old, <code>rvest</code> issue about this with a method of handling a different area of USNews rankings.</p>
<p>My solution was to simply copy and paste as it skipped going deeper into HTML, XML, and CSS entirely with 30 seconds of effort.</p>
<p><img src="usnewsrankings.PNG" /></p>
<p>The small bit of code to read my clipboard into R:</p>
<pre class="r"><code>usnewsrankings &lt;- read.table(&quot;clipboard&quot;,sep = &quot;\n&quot;)</code></pre>
<p>Taking a look at what this prints as:</p>
<pre class="r"><code>usnewsrankings %&gt;% (function(x)rbind(head(x),tail(x)))</code></pre>
<pre><code>##                                                                V1
## 1                  Stanford University (Department of Statistics)
## 2                                                    Stanford, CA
## 3                                                            \t5.0
## 4   University of California--Berkeley (Department of Statistics)
## 5                                                    Berkeley, CA
## 6                                                            \t4.7
## 336                                             RNP in Statistics
## 337                                                          \tN/A
## 338        Western Michigan University (Department of Statistics)
## 339                                                 Kalamazoo, MI
## 340                                             RNP in Statistics
## 341                                                          \tN/A</code></pre>
<p>Should this process change the original copied data can be found <a href="http://www.brandonpipher.com/post/2020-05-03-extracting-text-with-r-in-a-tidy-fashion/usnewsrank.RDS">here</a>. Note downloading this might throw an error if you don’t use <code>download.file(path, destfile, mode = "wb")</code> as the default <code>mode = "w"</code> seems to adjust headers.</p>
<p>Lets clean this by first removing the “RNP in Statistics” entries and selecting only the program and peer ranking. This will leave us with only the schools name and rank.</p>
<pre class="r"><code>usnewsrankings &lt;- usnewsrankings[usnewsrankings != &quot;RNP in Statistics&quot;][c(TRUE, FALSE, TRUE)]
usnewsrankings %&gt;% (function(x)rbind(head(x),tail(x)))</code></pre>
<pre><code>##      [,1]                                                                                           [,2]   [,3]                                                            [,4]   [,5]                                                     [,6]  
## [1,] &quot;Stanford University (Department of Statistics)&quot;                                               &quot;\t5.0&quot; &quot;University of California--Berkeley (Department of Statistics)&quot; &quot;\t4.7&quot; &quot;Harvard University (Department of Biostatistics)&quot;       &quot;\t4.6&quot;
## [2,] &quot;University of Oklahoma Health Sciences Center (Department of Biostatistics and Epidemiology)&quot; &quot;\tN/A&quot; &quot;University of Wyoming (Department of Statistics)&quot;              &quot;\tN/A&quot; &quot;Western Michigan University (Department of Statistics)&quot; &quot;\tN/A&quot;</code></pre>
<p>Now for cleaning this up:</p>
<pre class="r"><code>usnewsrankings %&lt;&gt;% 
  # Drop tabs
  str_replace(&quot;\t&quot;,&quot;&quot;) %&gt;%
  # Form a matrix
  matrix(ncol = 2, byrow = TRUE) %&gt;%
  # Column names
  set_colnames(c(&quot;Program&quot;,&quot;Rank&quot;)) %&gt;%
  # Into a tibble
  as_tibble() %&gt;%
  # Making Rank numeric
  # Coercing NA is intended here!
  mutate(Rank = as.numeric(Rank))</code></pre>
<pre><code>## Warning: NAs introduced by coercion</code></pre>
<p>And here we have the USNews ranking cleaned up:</p>
<pre class="r"><code>usnewsrankings %&gt;% (function(x)rbind(head(x),tail(x)))</code></pre>
<pre><code>## # A tibble: 12 x 2
##    Program                                                                                       Rank
##    &lt;chr&gt;                                                                                        &lt;dbl&gt;
##  1 Stanford University (Department of Statistics)                                                 5  
##  2 University of California--Berkeley (Department of Statistics)                                  4.7
##  3 Harvard University (Department of Biostatistics)                                               4.6
##  4 Johns Hopkins University (Department of Biostatistics)                                         4.6
##  5 University of Washington (Department of Biostatistics)                                         4.6
##  6 Harvard University (Department of Statistics)                                                  4.4
##  7 Oklahoma State University (Department of Statistics)                                          NA  
##  8 Old Dominion University (Department of Mathematics and Statistics)                            NA  
##  9 Tulane University (Department of Biostatistics)                                               NA  
## 10 University of Oklahoma Health Sciences Center (Department of Biostatistics and Epidemiology)  NA  
## 11 University of Wyoming (Department of Statistics)                                              NA  
## 12 Western Michigan University (Department of Statistics)                                        NA</code></pre>
<p>Splitting these into Statistics and Biostatistics programs requires first manually modifying an entry with Rutgers University.</p>
<pre class="r"><code>usnewsrankings[40,1] &lt;-
  c(&quot;Rutgers University--New Brunswick (Department of Statistics)&quot;)
usnewsrankings %&lt;&gt;%
  add_row(Program = &quot;Rutgers University--New Brunswick (Department of Biostatistics)&quot;,
          Rank = 3.3,
          .after = 40)</code></pre>
<p>Then we can split based on a few specific keywords.</p>
<pre class="r"><code>biostat.keywords = c(&quot;biostatistic&quot;,
                     &quot;health&quot;,
                     &quot;medicine&quot;)
stat.phd.rank &lt;-
  usnewsrankings %&gt;%
  filter(!str_detect(Program,
                     regex(
                       paste(biostat.keywords,
                             collapse = &#39;|&#39;),
                       ignore_case = TRUE
                     )))

biostat.phd.rank &lt;-
  usnewsrankings %&gt;%
  filter(str_detect(Program,
                    regex(
                      paste(biostat.keywords,
                            collapse = &#39;|&#39;),
                      ignore_case = TRUE
                    )))</code></pre>
<p>And here we are with the USNews rankings per program. Given this information is only updated every four years, with the next to be done in 2022, this should remain relevant for some time.</p>
<pre class="r"><code>stat.phd.rank %&gt;% print(n = Inf)</code></pre>
<pre><code>## # A tibble: 70 x 2
##    Program                                                                                     Rank
##    &lt;chr&gt;                                                                                      &lt;dbl&gt;
##  1 Stanford University (Department of Statistics)                                               5  
##  2 University of California--Berkeley (Department of Statistics)                                4.7
##  3 Harvard University (Department of Statistics)                                                4.4
##  4 University of Chicago (Department of Statistics)                                             4.4
##  5 Carnegie Mellon University (Department of Statistics)                                        4.3
##  6 University of Washington (Department of Statistics)                                          4.3
##  7 Duke University (Department of Statistical Science)                                          4.1
##  8 University of Michigan--Ann Arbor (Department of Statistics)                                 4.1
##  9 University of Pennsylvania (Department of Statistics)                                        4.1
## 10 Columbia University (Department of Statistics)                                               4  
## 11 North Carolina State University (Department of Statistics)                                   4  
## 12 University of Wisconsin--Madison (Department of Statistics)                                  4  
## 13 University of North Carolina--Chapel Hill (Department of Statistics &amp; Operations Research)   3.9
## 14 Cornell University (Department of Statistical Science)                                       3.8
## 15 Iowa State University (Department of Statistics)                                             3.8
## 16 Pennsylvania State University (Department of Statistics)                                     3.8
## 17 Texas A&amp;M University--College Station (Department of Statistics)                             3.8
## 18 University of Minnesota--Twin Cities (School of Statistics)                                  3.7
## 19 Purdue University--West Lafayette (Department of Statistics)                                 3.6
## 20 Johns Hopkins University (Department of Applied Mathematics and Statistics)                  3.5
## 21 University of California--Davis (Department of Statistics)                                   3.5
## 22 University of California--Los Angeles (Department of Statistics)                             3.5
## 23 Yale University (Department of Statistics)                                                   3.5
## 24 Ohio State University (Department of Statistics)                                             3.4
## 25 University of Illinois--Urbana-Champaign (Department of Statistics)                          3.4
## 26 Rutgers University--New Brunswick (Department of Statistics)                                 3.3
## 27 University of Florida (Department of Statistics)                                             3.3
## 28 University of Iowa (Department of Statistics and Actuarial Science)                          3.3
## 29 Rice University (Department of Statistics)                                                   3.2
## 30 Colorado State University (Department of Statistics)                                         3.1
## 31 Florida State University (Department of Statistics)                                          3.1
## 32 University of Connecticut (Department of Statistics)                                         3.1
## 33 Michigan State University (Department of Statistics and Probability)                         3  
## 34 University of California--Irvine (Department of Statistics)                                  3  
## 35 University of Texas--Austin (Department of Statistics and Data Science)                      3  
## 36 Northwestern University (Department of Statistics)                                           2.9
## 37 University of Pittsburgh (Department of Statistics)                                          2.9
## 38 George Washington University (Department of Statistics)                                      2.8
## 39 New York University (Department of Information, Operations, and Management Sciences)         2.8
## 40 University of Georgia (Department of Statistics)                                             2.8
## 41 University of Missouri--Columbia (Department of Statistics)                                  2.8
## 42 Virginia Tech (Department of Statistics)                                                     2.8
## 43 University of California--Santa Barbara (Department of Statistics and Applied Probability)   2.7
## 44 Indiana University--Bloomington (Department of Statistics)                                   2.6
## 45 Southern Methodist University (Department of Statistical Science)                            2.6
## 46 University of Maryland--Baltimore County (Department of Mathematics and Statistics)          2.6
## 47 University of Virginia (Department of Statistics)                                            2.6
## 48 Oregon State University (Department of Statistics)                                           2.5
## 49 University of California--Riverside (Department of Statistics)                               2.5
## 50 University of Massachusetts--Amherst (Department of Mathematics and Statistics)              2.5
## 51 University of South Carolina (Department of Statistics)                                      2.5
## 52 Arizona State University (School of Mathematical &amp; Statistical Sciences)                     2.4
## 53 Case Western Reserve University (Department of Statistics)                                   2.4
## 54 Temple University (Department of Statistics)                                                 2.4
## 55 Baylor University (Department of Statistical Science)                                        2.3
## 56 George Mason University (Department of Statistics)                                           2.3
## 57 Kansas State University (Department of Statistics)                                           2.3
## 58 University of Colorado--Denver (Department of Mathematical and Statistical Sciences)         2.3
## 59 University of Kentucky (Department of Statistics)                                            2.2
## 60 Virginia Commonwealth University (Department of Statistics)                                  2.2
## 61 San Diego State University (Department of Mathematics and Statistics)                        2.1
## 62 University of North Carolina--Charlotte (Department of Mathematics and Statistics)           2  
## 63 University of Texas--San Antonio (Department of Management Science and Statistics)           2  
## 64 Auburn University (Department of Mathematics and Statistics)                                NA  
## 65 Montana State University (Department of Mathematical Sciences)                              NA  
## 66 North Dakota State University (Department of Statistics)                                    NA  
## 67 Oklahoma State University (Department of Statistics)                                        NA  
## 68 Old Dominion University (Department of Mathematics and Statistics)                          NA  
## 69 University of Wyoming (Department of Statistics)                                            NA  
## 70 Western Michigan University (Department of Statistics)                                      NA</code></pre>
<pre class="r"><code>biostat.phd.rank %&gt;% print(n = Inf)</code></pre>
<pre><code>## # A tibble: 41 x 2
##    Program                                                                                                      Rank
##    &lt;chr&gt;                                                                                                       &lt;dbl&gt;
##  1 Harvard University (Department of Biostatistics)                                                              4.6
##  2 Johns Hopkins University (Department of Biostatistics)                                                        4.6
##  3 University of Washington (Department of Biostatistics)                                                        4.6
##  4 University of North Carolina--Chapel Hill (Department of Biostatistics)                                       4.3
##  5 University of Michigan--Ann Arbor (Department of Biostatistics)                                               4.2
##  6 University of California--Berkeley (Group in Biostatistics)                                                   4.1
##  7 University of Minnesota--Twin Cities (School of Public Health)                                                3.7
##  8 University of Wisconsin--Madison (School of Medicine and Public Health)                                       3.7
##  9 Columbia University (Department of Biostatistics)                                                             3.6
## 10 University of California--Los Angeles (Department of Biostatistics)                                           3.6
## 11 University of Texas MD Anderson (Department of Biostatistics)                                                 3.6
## 12 University of Pennsylvania (Department of Biostatistics &amp; Epidemiology)                                       3.5
## 13 Yale University (Department of Biostatistics)                                                                 3.5
## 14 Emory University (Department of Biostatistics and Bioinformatics)                                             3.4
## 15 Rutgers University--New Brunswick (Department of Biostatistics)                                               3.3
## 16 Brown University (Department of Biostatistics)                                                                3.1
## 17 Duke University (Department of Biostatistics and Bioinformatics)                                              3.1
## 18 Vanderbilt University (Department of Biostatistics)                                                           3.1
## 19 Boston University (School of Public Health)                                                                   3  
## 20 University of California--Davis (Graduate Group in Biostatistics)                                             3  
## 21 University of Pittsburgh (Department of Biostatistics)                                                        3  
## 22 University of Florida (Department of Biostatistics)                                                           2.9
## 23 University of Iowa (Department of Biostatistics)                                                              2.9
## 24 University of Rochester (Department of Biostatistics and Computational Biology)                               2.9
## 25 University of Texas Health Science Center--Houston (University of Texas MD Anderson Cancer Center UTHealth)   2.9
## 26 Medical College of Wisconsin (Division of Biostatistics)                                                      2.8
## 27 University of Illinois--Chicago (Epidemiology and Biostatistics Division)                                     2.7
## 28 Case Western Reserve University (Department of Epidemiology and Biostatistics)                                2.6
## 29 University of Colorado--Denver (Department of Biostatistics and Informatics)                                  2.5
## 30 University of Massachusetts--Amherst (Division of Biostatistics and Epidemiology)                             2.4
## 31 University at Buffalo--SUNY (Department of Biostatistics)                                                     2.3
## 32 University of South Carolina (Epidemiology and Biostatistics)                                                 2.3
## 33 University of Alabama--Birmingham (Department of Biostatistics)                                               2.2
## 34 University of Kansas Medical Center (Department of Biostatistics)                                             2.2
## 35 University at Albany--SUNY (Department of Epidemiology &amp; Biostatistics)                                       2.1
## 36 University of Cincinnati (Division of Epidemiology &amp; Biostatistics)                                           2.1
## 37 Virginia Commonwealth University (Department of Biostatistics)                                                2.1
## 38 Augusta University (Department of Biostatistics and Epidemiology)                                            NA  
## 39 Louisiana State University Health Sciences Center--New Orleans (Biostatistics Program)                       NA  
## 40 Tulane University (Department of Biostatistics)                                                              NA  
## 41 University of Oklahoma Health Sciences Center (Department of Biostatistics and Epidemiology)                 NA</code></pre>
</div>
